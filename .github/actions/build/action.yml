name: Build .NET
inputs:
  path:
    description: path from where to run the actions
    type: string
    required: false
    default: ${{ github.workspace }}
  configuration:
    required: false
    default: Debug
  framework:
    required: true
runs:
  using: composite
  steps:
  - name: Build (${{ inputs.configuration }}) ${{ inputs.framework }}
    shell: bash
    run: |-
      pushd ${{ inputs.path }}
      configuration=${{ inputs.configuration }}
      framework=${{ inputs.framework }}
      for a in $(rg --files-with-matches  --type-add "csp:*.csproj" -tcsp "${framework}"); do
        echo "Building $a with ${framework}/${configuration}"
        echo dotnet build -f ${framework} -c ${configuration} $a
        dotnet build -f ${framework} -c ${configuration} $a
      done
      popd
